---
const { lang } = Astro.props;

const navItems = {
  es: [
    { name: "Inicio", href: "#inicio" },
    { name: "Sobre m√≠", href: "#sobre-mi" },
    { name: "Proyectos", href: "#proyectos" },
    { name: "Experiencia", href: "#experiencia" },
    { name: "Contacto", href: "#contacto" },
  ],
  en: [
    { name: "Home", href: "#inicio" },
    { name: "About Me", href: "#sobre-mi" },
    { name: "Projects", href: "#proyectos" },
    { name: "Experience", href: "#experiencia" },
    { name: "Contact", href: "#contacto" },
  ],
};

const items = navItems[lang] || navItems.es;
---

<header
  id="main-header"
  class="fixed top-0 left-0 right-0 z-50 flex justify-center p-4 transition-all duration-300"
>
  <nav
    id="nav-container"
    class="flex items-center justify-between md:justify-start gap-4 md:gap-6 px-4 md:px-6 py-3 bg-slate-900/60 backdrop-blur-md border border-slate-800 rounded-full shadow-2xl transition-all duration-300 w-full max-w-4xl"
  >
    <div class="flex items-center gap-2 pr-4 border-r border-slate-800">
      <img src="/icon.png" alt="logo" class="w-8 h-8 rounded-full" />
    </div>

    <!-- Desktop Links -->
    <ul class="hidden md:flex gap-6">
      {
        navItems[lang].map((item) => (
          <li>
            <a
              href={item.href}
              class="nav-link text-sm font-medium text-slate-300 hover:text-emerald-400 transition-colors relative group"
            >
              {item.name}
              <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-emerald-500 transition-all duration-300 group-hover:w-full" />
            </a>
          </li>
        ))
      }
    </ul>

    <div class="flex items-center gap-3 ml-auto">
      <a
        href={lang === "es" ? "/en" : "/"}
        class="text-xs font-bold px-2 py-1 bg-slate-800 hover:bg-emerald-500/20 hover:text-emerald-400 rounded transition-all border border-slate-700"
      >
        {lang === "es" ? "EN" : "ES"}
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden p-2 text-slate-300 hover:text-emerald-400 focus:outline-none"
        aria-label="Toggle Menu"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </nav>

  <!-- Mobile Overlay Menu -->
  <div
    id="mobile-menu"
    class="fixed inset-0 bg-slate-950/95 backdrop-blur-xl z-[60] flex flex-col items-center justify-center gap-8 translate-x-full transition-transform duration-300 md:hidden"
  >
    <button
      id="close-menu-button"
      class="absolute top-6 right-6 p-2 text-slate-300 hover:text-emerald-400"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="32"
        height="32"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>

    <ul class="flex flex-col items-center gap-8">
      {
        navItems[lang].map((item) => (
          <li>
            <a
              href={item.href}
              class="mobile-nav-link text-2xl font-bold text-slate-300 hover:text-emerald-400 transition-all active:scale-95"
            >
              {item.name}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</header>

<script>
  const header = document.getElementById("main-header");
  const navContainer = document.getElementById("nav-container");
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const closeMenuButton = document.getElementById("close-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");
  const mobileLinks = document.querySelectorAll(".mobile-nav-link");

  const toggleMenu = (show) => {
    if (show) {
      mobileMenu?.classList.remove("translate-x-full");
      document.body.style.overflow = "hidden";
    } else {
      mobileMenu?.classList.add("translate-x-full");
      document.body.style.overflow = "auto";
    }
  };

  mobileMenuButton?.addEventListener("click", () => toggleMenu(true));
  closeMenuButton?.addEventListener("click", () => toggleMenu(false));

  mobileLinks.forEach((link) => {
    link.addEventListener("click", () => toggleMenu(false));
  });

  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      header?.classList.add("p-2");
      navContainer?.classList.add("bg-slate-950/80", "py-2");
      navContainer?.classList.remove("bg-slate-900/60", "py-3");
    } else {
      header?.classList.remove("p-2");
      navContainer?.classList.remove("bg-slate-950/80", "py-2");
      navContainer?.classList.add("bg-slate-900/60", "py-3");
    }
  });
</script>
